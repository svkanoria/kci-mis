{
  "id": "9988034c-463d-4802-ba4e-1dd4c4e8c4a4",
  "prevId": "c4772ee0-555a-4b4b-b4a1-9e12f7f34548",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.methanolPrices": {
      "name": "methanolPrices",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "identity": {
            "type": "always",
            "name": "methanolPrices_id_seq",
            "schema": "public",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "2147483647",
            "cache": "1",
            "cycle": false
          }
        },
        "date": {
          "name": "date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "dailyIcisKandlaPrice": {
          "name": "dailyIcisKandlaPrice",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "methanolPrices_date_unique": {
          "name": "methanolPrices_date_unique",
          "nullsNotDistinct": false,
          "columns": [
            "date"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.salesInvoicesDerived": {
      "name": "salesInvoicesDerived",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "identity": {
            "type": "always",
            "name": "salesInvoicesDerived_id_seq",
            "schema": "public",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "2147483647",
            "cache": "1",
            "cycle": false
          }
        },
        "rawId": {
          "name": "rawId",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "normalizationFactor": {
          "name": "normalizationFactor",
          "type": "numeric",
          "primaryKey": false,
          "notNull": true
        },
        "normBasicRate": {
          "name": "normBasicRate",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "normNetRealisationPerUnit": {
          "name": "normNetRealisationPerUnit",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "normQty": {
          "name": "normQty",
          "type": "numeric",
          "primaryKey": false,
          "notNull": true
        },
        "productCategory": {
          "name": "productCategory",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "salesInvoicesDerived_rawId_salesInvoicesRaw_id_fk": {
          "name": "salesInvoicesDerived_rawId_salesInvoicesRaw_id_fk",
          "tableFrom": "salesInvoicesDerived",
          "tableTo": "salesInvoicesRaw",
          "columnsFrom": [
            "rawId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "salesInvoicesDerived_rawId_unique": {
          "name": "salesInvoicesDerived_rawId_unique",
          "nullsNotDistinct": false,
          "columns": [
            "rawId"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.salesInvoicesRaw": {
      "name": "salesInvoicesRaw",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "identity": {
            "type": "always",
            "name": "salesInvoicesRaw_id_seq",
            "schema": "public",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "2147483647",
            "cache": "1",
            "cycle": false
          }
        },
        "assessableValue": {
          "name": "assessableValue",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "basicAmount": {
          "name": "basicAmount",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "basicRate": {
          "name": "basicRate",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "cgstAmount": {
          "name": "cgstAmount",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "cgstPct": {
          "name": "cgstPct",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "commissionRate": {
          "name": "commissionRate",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "commissionValue": {
          "name": "commissionValue",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "consignee": {
          "name": "consignee",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "consigneeCity": {
          "name": "consigneeCity",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "consigneeGstRegNo": {
          "name": "consigneeGstRegNo",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "consigneeName": {
          "name": "consigneeName",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "consigneePlaceOfSupplyCode": {
          "name": "consigneePlaceOfSupplyCode",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "consigneeRegion": {
          "name": "consigneeRegion",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "contractNo": {
          "name": "contractNo",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "contractDate": {
          "name": "contractDate",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "distChannel": {
          "name": "distChannel",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "distChannelDescription": {
          "name": "distChannelDescription",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "division": {
          "name": "division",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "divDescription": {
          "name": "divDescription",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "exchangeRate": {
          "name": "exchangeRate",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "ewayBillNo": {
          "name": "ewayBillNo",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "freightByCustRate": {
          "name": "freightByCustRate",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "freightByCustValue": {
          "name": "freightByCustValue",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "freightByKciRate": {
          "name": "freightByKciRate",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "freightByKciValue": {
          "name": "freightByKciValue",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "giDate": {
          "name": "giDate",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "giNo": {
          "name": "giNo",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "gstTaxInvDate": {
          "name": "gstTaxInvDate",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "gstTaxInvNo": {
          "name": "gstTaxInvNo",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "hsnCode": {
          "name": "hsnCode",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "igstAmount": {
          "name": "igstAmount",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "igstPct": {
          "name": "igstPct",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "incoterms": {
          "name": "incoterms",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "incotermsDescription": {
          "name": "incotermsDescription",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "internalRefNo": {
          "name": "internalRefNo",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "invItem": {
          "name": "invItem",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "invDate": {
          "name": "invDate",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "invoiceCurrency": {
          "name": "invoiceCurrency",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "invoiceType": {
          "name": "invoiceType",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "invoiceTypeDescription": {
          "name": "invoiceTypeDescription",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "invoiceValue": {
          "name": "invoiceValue",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "lrDate": {
          "name": "lrDate",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "lrNo": {
          "name": "lrNo",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "materialCode": {
          "name": "materialCode",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "materialDescription": {
          "name": "materialDescription",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "netRealisation": {
          "name": "netRealisation",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "netRealisationPerUnit": {
          "name": "netRealisationPerUnit",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "placeOfSupply": {
          "name": "placeOfSupply",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "placeOfSupplyCode": {
          "name": "placeOfSupplyCode",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "plant": {
          "name": "plant",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "poNumber": {
          "name": "poNumber",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "qty": {
          "name": "qty",
          "type": "numeric",
          "primaryKey": false,
          "notNull": true
        },
        "receiptVoucherDate": {
          "name": "receiptVoucherDate",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "receiptVoucherNo": {
          "name": "receiptVoucherNo",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "recipient": {
          "name": "recipient",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "recipientCity": {
          "name": "recipientCity",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "recipientGstRegNo": {
          "name": "recipientGstRegNo",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "recipientName": {
          "name": "recipientName",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "salesOrgDescription": {
          "name": "salesOrgDescription",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "sgstAmount": {
          "name": "sgstAmount",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "sgstPct": {
          "name": "sgstPct",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "soDate": {
          "name": "soDate",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "soQty": {
          "name": "soQty",
          "type": "numeric",
          "primaryKey": false,
          "notNull": true
        },
        "taxableValue": {
          "name": "taxableValue",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "tcsAmount": {
          "name": "tcsAmount",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "tcsSaleAmount": {
          "name": "tcsSaleAmount",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "transporterName": {
          "name": "transporterName",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "ugstAmount": {
          "name": "ugstAmount",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "ugstPct": {
          "name": "ugstPct",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "uom": {
          "name": "uom",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "vehicleNo": {
          "name": "vehicleNo",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "salesInvoicesRaw_internalRefNo_unique": {
          "name": "salesInvoicesRaw_internalRefNo_unique",
          "nullsNotDistinct": false,
          "columns": [
            "internalRefNo"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {},
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {
    "public.methanolPricesInterpolated": {
      "columns": {
        "date": {
          "name": "date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "dailyIcisKandlaPrice": {
          "name": "dailyIcisKandlaPrice",
          "type": "numeric",
          "primaryKey": false,
          "notNull": true
        },
        "dailyIcisKandlaPriceForwardFill": {
          "name": "dailyIcisKandlaPriceForwardFill",
          "type": "numeric",
          "primaryKey": false,
          "notNull": true
        },
        "dailyIcisKandlaPriceBackwardFill": {
          "name": "dailyIcisKandlaPriceBackwardFill",
          "type": "numeric",
          "primaryKey": false,
          "notNull": true
        },
        "isInterpolated": {
          "name": "isInterpolated",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        }
      },
      "definition": "\n  WITH valid_prices AS (\n      SELECT date, \"dailyIcisKandlaPrice\" as price\n      FROM \"methanolPrices\"\n      WHERE \"dailyIcisKandlaPrice\" IS NOT NULL\n  ),\n  ordered_prices AS (\n      SELECT\n          date,\n          price,\n          LEAD(date) OVER (ORDER BY date) as next_date,\n          LEAD(price) OVER (ORDER BY date) as next_price\n      FROM valid_prices\n  )\n  SELECT\n      t.day::date as date,\n      COALESCE(\n          op.price + (op.next_price - op.price) * (t.day::date - op.date)::numeric / NULLIF((op.next_date - op.date)::numeric, 0),\n          op.price\n      ) as \"dailyIcisKandlaPrice\",\n      op.price as \"dailyIcisKandlaPriceForwardFill\",\n      CASE WHEN t.day::date = op.date THEN op.price ELSE op.next_price END as \"dailyIcisKandlaPriceBackwardFill\",\n      (t.day::date != op.date) as \"isInterpolated\"\n  FROM ordered_prices op\n  CROSS JOIN LATERAL generate_series(op.date::timestamp, COALESCE(op.next_date::timestamp - interval '1 day', op.date::timestamp), interval '1 day') as t(day)\n",
      "name": "methanolPricesInterpolated",
      "schema": "public",
      "isExisting": false,
      "materialized": false
    }
  },
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}